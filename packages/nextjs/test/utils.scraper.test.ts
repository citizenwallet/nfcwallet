import { extractUserFromInjectedJson } from "../utils/scraper";

// Example usage
// const htmlContent = `<html><body><script>self.__next_f.push([1,"10:[\\"$\\",\\"$L11\\",null,{\\"uuid\\":\\"2o4re1e\\",\\"self\\":false,\\"attendeeTypes\\":[\\"hacker\\"],\\"event\\":{\\"slug\\":\\"london2024\\",\\"name\\":\\"ETHGlobal London\\",\\"squareLogo\\":{\\"fullUrl\\":\\"https://storage.googleapis.com/ethglobal-api-production/events%2Fgyosr%2Flogo%2F1700000479708_ethlondon.jpg\\"},\\"timezone\\":{\\"name\\":\\"Europe/London\\"}},\\"user\\":{\\"name\\":\\"Kevin Sundar Raj\\",\\"title\\":null,\\"bio\\":null,\\"avatar\\":{\\"fullUrl\\":\\"https://storage.googleapis.com/ethglobal-api-production/users%2Fdbp8f%2Fimages%2FIMG_6003.JPG\\"}}}]\\n")</script><script>self.__next_f.push([1,""])</script></body></html>`;
const htmlContent = `<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/6be1f93fa13a1a54.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c0a6462d4dacc4dc.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-1b2d90dd1d600b14.js"/><script src="/_next/static/chunks/fd9d1056-230d2d4bb3a53d16.js" async=""></script><script src="/_next/static/chunks/396464d2-1cfd4f9a87f796ba.js" async=""></script><script src="/_next/static/chunks/1313-5bd430362b3f26c6.js" async=""></script><script src="/_next/static/chunks/main-app-38da352583a272b3.js" async=""></script><script src="/_next/static/chunks/aaea2bcf-22b9cc29684a314e.js" async=""></script><script src="/_next/static/chunks/e37a0b60-d7388f6cd89e703a.js" async=""></script><script src="/_next/static/chunks/4e88bc13-fd73c15ad19bb423.js" async=""></script><script src="/_next/static/chunks/6851-1cfe8533cc25dcd6.js" async=""></script><script src="/_next/static/chunks/9425-acf333a995f72366.js" async=""></script><script src="/_next/static/chunks/6425-47114b406b9116ae.js" async=""></script><script src="/_next/static/chunks/5416-a15ba7c6cac33048.js" async=""></script><script src="/_next/static/chunks/7788-50442fb58a059251.js" async=""></script><script src="/_next/static/chunks/7974-8551f3fc399508cc.js" async=""></script><script src="/_next/static/chunks/app/layout-0645845e1af1bd0d.js" async=""></script><script src="/_next/static/chunks/13b76428-9da287dbdbeac184.js" async=""></script><script src="/_next/static/chunks/8781-a898b873392387f0.js" async=""></script><script src="/_next/static/chunks/1396-8fd76785fbc06d30.js" async=""></script><script src="/_next/static/chunks/8445-5832bf612b1f1e91.js" async=""></script><script src="/_next/static/chunks/5281-dd20404f267a4678.js" async=""></script><script src="/_next/static/chunks/2088-86b39bb1821beb6f.js" async=""></script><script src="/_next/static/chunks/2096-aac81ea626d16ce2.js" async=""></script><script src="/_next/static/chunks/3206-428ef015045784e2.js" async=""></script><script src="/_next/static/chunks/app/connect/%5Buuid%5D/layout-ebf5faed02d29476.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=UA-114129257-1" as="script"/><title>ETHGlobal</title><meta name="description" content="Bringing developers onchain to build the future of the internet."/><meta name="author" content="ETHGlobal"/><meta name="keywords" content="ethereum,global,hackathons,web3,decentralized,crypto,ethglobal,eth,blockchain,developers"/><meta property="og:title" content="ETHGlobal"/><meta property="og:description" content="Bringing developers onchain to build the future of the internet."/><meta property="og:url" content="https://ethglobal.com"/><meta property="og:image" content="https://ethglobal.com/og.png"/><meta property="og:image:alt" content="ETHGlobal"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@ethglobal"/><meta name="twitter:creator" content="@ethglobal"/><meta name="twitter:title" content="ETHGlobal"/><meta name="twitter:description" content="Bringing developers onchain to build the future of the internet."/><meta name="twitter:image" content="https://ethglobal.com/og.png"/><meta name="twitter:image:alt" content="ETHGlobal"/><link rel="icon" href="/favicon.ico"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body><div data-rk=""><style>[data-rk]{--rk-blurs-modalOverlay:blur(0px);--rk-fonts-body:SFRounded, ui-rounded, "SF Pro Rounded", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";--rk-radii-actionButton:9999px;--rk-radii-connectButton:12px;--rk-radii-menuButton:12px;--rk-radii-modal:24px;--rk-radii-modalMobile:28px;--rk-colors-accentColor:#0E76FD;--rk-colors-accentColorForeground:#FFF;--rk-colors-actionButtonBorder:rgba(0, 0, 0, 0.04);--rk-colors-actionButtonBorderMobile:rgba(0, 0, 0, 0.06);--rk-colors-actionButtonSecondaryBackground:rgba(0, 0, 0, 0.06);--rk-colors-closeButton:rgba(60, 66, 66, 0.8);--rk-colors-closeButtonBackground:rgba(0, 0, 0, 0.06);--rk-colors-connectButtonBackground:#FFF;--rk-colors-connectButtonBackgroundError:#FF494A;--rk-colors-connectButtonInnerBackground:linear-gradient(0deg, rgba(0, 0, 0, 0.03), rgba(0, 0, 0, 0.06));--rk-colors-connectButtonText:#25292E;--rk-colors-connectButtonTextError:#FFF;--rk-colors-connectionIndicator:#30E000;--rk-colors-downloadBottomCardBackground:linear-gradient(126deg, rgba(255, 255, 255, 0) 9.49%, rgba(171, 171, 171, 0.04) 71.04%), #FFFFFF;--rk-colors-downloadTopCardBackground:linear-gradient(126deg, rgba(171, 171, 171, 0.2) 9.49%, rgba(255, 255, 255, 0) 71.04%), #FFFFFF;--rk-colors-error:#FF494A;--rk-colors-generalBorder:rgba(0, 0, 0, 0.06);--rk-colors-generalBorderDim:rgba(0, 0, 0, 0.03);--rk-colors-menuItemBackground:rgba(60, 66, 66, 0.1);--rk-colors-modalBackdrop:rgba(0, 0, 0, 0.3);--rk-colors-modalBackground:#FFF;--rk-colors-modalBorder:transparent;--rk-colors-modalText:#25292E;--rk-colors-modalTextDim:rgba(60, 66, 66, 0.3);--rk-colors-modalTextSecondary:rgba(60, 66, 66, 0.6);--rk-colors-profileAction:#FFF;--rk-colors-profileActionHover:rgba(255, 255, 255, 0.5);--rk-colors-profileForeground:rgba(60, 66, 66, 0.06);--rk-colors-selectedOptionBorder:rgba(60, 66, 66, 0.1);--rk-colors-standby:#FFD641;--rk-shadows-connectButton:0px 4px 12px rgba(0, 0, 0, 0.1);--rk-shadows-dialog:0px 8px 32px rgba(0, 0, 0, 0.32);--rk-shadows-profileDetailsAction:0px 2px 6px rgba(37, 41, 46, 0.04);--rk-shadows-selectedOption:0px 2px 6px rgba(0, 0, 0, 0.24);--rk-shadows-selectedWallet:0px 2px 6px rgba(0, 0, 0, 0.12);--rk-shadows-walletLogo:0px 2px 16px rgba(0, 0, 0, 0.16);}</style><div class="w-full h-screen flex justify-center items-center"><svg viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" class="animate-bounce h-24 2xl:h-32"><path fill-rule="evenodd" clip-rule="evenodd" d="m20.944 26.35 5.556-8.732 5.557 8.732-5.557 3.175-5.556-3.175Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m20.944 27.841 5.556 3.176 5.557-3.176-5.557 7.542-5.556-7.542Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M29.027 14.076c-.863.403-1.703.852-2.517 1.347-.819-.5-1.666-.952-2.538-1.353a29.297 29.297 0 0 1 2.52-1.524c.869.468 1.715.979 2.535 1.53Z" fill="#1F294F" fill-opacity="0.36"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M40.892 12.108c-3.05-3.05-8.609-2.685-14.401.438.87.468 1.716.979 2.536 1.53 2.242-1.037 4.378-1.593 6.187-1.593 1.618 0 2.975.444 3.916 1.385 1.997 1.996 1.76 5.86-.206 10.106a30.57 30.57 0 0 1 1.53 2.535c3.123-5.792 3.488-11.35.438-14.4Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M29.027 14.076a26.08 26.08 0 0 0-2.517 1.347A34.019 34.019 0 0 1 37.57 26.5c.496-.818.948-1.661 1.353-2.528a36.477 36.477 0 0 0-4.478-5.419 36.147 36.147 0 0 0-5.42-4.478h.001Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M40.455 26.51c-.468.866-.978 1.708-1.529 2.525a26.209 26.209 0 0 0-1.355-2.534c.497-.818.948-1.661 1.354-2.527a30.57 30.57 0 0 1 1.53 2.535Z" fill="#1F294F" fill-opacity="0.36"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M38.926 29.034a26.24 26.24 0 0 0-1.355-2.533 32.984 32.984 0 0 1-4.886 6.185 32.941 32.941 0 0 1-6.175 4.89c.813.497 1.653.946 2.517 1.347a36.134 36.134 0 0 0 5.42-4.478 36.372 36.372 0 0 0 4.48-5.41Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M42.239 30.685a24.094 24.094 0 0 0-1.784-4.176c-.468.866-.978 1.71-1.529 2.525 1.964 4.244 2.201 8.103.204 10.098-1.996 1.996-5.858 1.757-10.103-.209a29.132 29.132 0 0 1-2.536 1.53c3.084 1.664 6.1 2.545 8.709 2.545 2.29 0 4.266-.679 5.692-2.105 2.232-2.232 2.708-5.856 1.347-10.208Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M29.027 38.923a29.153 29.153 0 0 1-2.536 1.53 29.812 29.812 0 0 1-2.519-1.523c.872-.402 1.72-.853 2.538-1.353.813.496 1.653.945 2.517 1.346Z" fill="#1F294F" fill-opacity="0.36"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M21.57 39.863c-3.423 1.072-6.159.812-7.702-.731-1.542-1.543-1.802-4.279-.73-7.701.259-.82.57-1.621.93-2.4a30.407 30.407 0 0 1-1.524-2.52 24.066 24.066 0 0 0-1.782 4.175c-1.363 4.35-.884 7.975 1.345 10.207C13.507 42.29 15.451 43 17.78 43c1.54-.023 3.07-.28 4.534-.762a24.12 24.12 0 0 0 4.178-1.784 29.832 29.832 0 0 1-2.519-1.524c-.78.362-1.582.674-2.402.933Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M23.972 38.93a24.625 24.625 0 0 0 2.538-1.353 32.908 32.908 0 0 1-6.196-4.89 32.908 32.908 0 0 1-4.89-6.196c-.5.82-.953 1.667-1.355 2.54a36.459 36.459 0 0 0 4.486 5.414 36.093 36.093 0 0 0 5.417 4.485Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M15.424 26.49c-.5.82-.953 1.668-1.355 2.54a30.398 30.398 0 0 1-1.525-2.519c.469-.87.98-1.718 1.533-2.538.4.864.85 1.704 1.347 2.517Z" fill="#1F294F" fill-opacity="0.36"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M13.868 13.868c1.543-1.543 4.279-1.803 7.701-.73.82.26 1.622.571 2.403.931a29.278 29.278 0 0 1 2.519-1.523 23.95 23.95 0 0 0-4.179-1.785c-4.349-1.361-7.973-.884-10.205 1.347-1.426 1.426-2.105 3.402-2.105 5.693 0 2.608.88 5.627 2.542 8.71.469-.87.98-1.717 1.532-2.537-1.965-4.246-2.204-8.11-.208-10.106Z" fill="#1F294F" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M23.972 14.07a37.313 37.313 0 0 0-9.895 9.903c.4.864.85 1.704 1.347 2.517A33.985 33.985 0 0 1 26.51 15.423c-.819-.5-1.666-.952-2.538-1.353Z" fill="#1F294F" fill-opacity="0.2"></path></svg></div></div><script src="/_next/static/chunks/webpack-1b2d90dd1d600b14.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/6be1f93fa13a1a54.css\",\"style\"]\n2:HL[\"/_next/static/css/c0a6462d4dacc4dc.css\",\"style\"]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I[33728,[],\"\"]\n6:I[29928,[],\"\"]\n"])</script><script>self.__next_f.push([1,"7:I[73994,[\"8218\",\"static/chunks/aaea2bcf-22b9cc29684a314e.js\",\"1866\",\"static/chunks/e37a0b60-d7388f6cd89e703a.js\",\"9472\",\"static/chunks/4e88bc13-fd73c15ad19bb423.js\",\"6851\",\"static/chunks/6851-1cfe8533cc25dcd6.js\",\"9425\",\"static/chunks/9425-acf333a995f72366.js\",\"6425\",\"static/chunks/6425-47114b406b9116ae.js\",\"5416\",\"static/chunks/5416-a15ba7c6cac33048.js\",\"7788\",\"static/chunks/7788-50442fb58a059251.js\",\"7974\",\"static/chunks/7974-8551f3fc399508cc.js\",\"3185\",\"static/chunks/app/layout-0645845e1af1bd0d.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"8:I[69850,[\"8218\",\"static/chunks/aaea2bcf-22b9cc29684a314e.js\",\"1866\",\"static/chunks/e37a0b60-d7388f6cd89e703a.js\",\"9472\",\"static/chunks/4e88bc13-fd73c15ad19bb423.js\",\"6851\",\"static/chunks/6851-1cfe8533cc25dcd6.js\",\"9425\",\"static/chunks/9425-acf333a995f72366.js\",\"6425\",\"static/chunks/6425-47114b406b9116ae.js\",\"5416\",\"static/chunks/5416-a15ba7c6cac33048.js\",\"7788\",\"static/chunks/7788-50442fb58a059251.js\",\"7974\",\"static/chunks/7974-8551f3fc399508cc.js\",\"3185\",\"static/chunks/app/layout-0645845e1af1bd0d.js\"],\"Providers\"]\n"])</script><script>self.__next_f.push([1,"9:I[56954,[],\"\"]\na:I[7264,[],\"\"]\n"])</script><script>self.__next_f.push([1,"b:I[72544,[\"6990\",\"static/chunks/13b76428-9da287dbdbeac184.js\",\"8218\",\"static/chunks/aaea2bcf-22b9cc29684a314e.js\",\"1866\",\"static/chunks/e37a0b60-d7388f6cd89e703a.js\",\"8781\",\"static/chunks/8781-a898b873392387f0.js\",\"6851\",\"static/chunks/6851-1cfe8533cc25dcd6.js\",\"1396\",\"static/chunks/1396-8fd76785fbc06d30.js\",\"8445\",\"static/chunks/8445-5832bf612b1f1e91.js\",\"5281\",\"static/chunks/5281-dd20404f267a4678.js\",\"2088\",\"static/chunks/2088-86b39bb1821beb6f.js\",\"2096\",\"static/chunks/2096-aac81ea626d16ce2.js\",\"3206\",\"static/chunks/3206-428ef015045784e2.js\",\"7506\",\"static/chunks/app/connect/%5Buuid%5D/layout-ebf5faed02d29476.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"c:I[2709,[\"6990\",\"static/chunks/13b76428-9da287dbdbeac184.js\",\"8218\",\"static/chunks/aaea2bcf-22b9cc29684a314e.js\",\"1866\",\"static/chunks/e37a0b60-d7388f6cd89e703a.js\",\"8781\",\"static/chunks/8781-a898b873392387f0.js\",\"6851\",\"static/chunks/6851-1cfe8533cc25dcd6.js\",\"1396\",\"static/chunks/1396-8fd76785fbc06d30.js\",\"8445\",\"static/chunks/8445-5832bf612b1f1e91.js\",\"5281\",\"static/chunks/5281-dd20404f267a4678.js\",\"2088\",\"static/chunks/2088-86b39bb1821beb6f.js\",\"2096\",\"static/chunks/2096-aac81ea626d16ce2.js\",\"3206\",\"static/chunks/3206-428ef015045784e2.js\",\"7506\",\"static/chunks/app/connect/%5Buuid%5D/layout-ebf5faed02d29476.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/6be1f93fa13a1a54.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c0a6462d4dacc4dc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"FSyDxJTeohAIgAzZj5VeU\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/connect/2o4re1e\",\"initialTree\":[\"\",{\"children\":[\"connect\",{\"children\":[[\"uuid\",\"2o4re1e\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L5\"],\"globalErrorComponent\":\"$6\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"children\":[[[\"$\",\"$L7\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=UA-114129257-1\"}],[\"$\",\"$L7\",null,{\"id\":\"google-analytics\",\"children\":\"\\n          window.dataLayer = window.dataLayer || [];\\n          function gtag(){dataLayer.push(arguments);}\\n          gtag('js', new Date());\\n\\n          gtag('config', 'UA-114129257-1');\\n        \"}]],[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col h-screen bg-eg-gradient bg-no-repeat bg-contain\",\"children\":[[\"$\",\"$Lb\",null,{}],[\"$\",\"div\",null,{\"className\":\"flex px-4 my-8 md:px-16 lg:px-32 grow justify-content\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-5xl mx-auto border-black/10 border-2 px-10 py-12 md:px-28 md:py-24 rounded-3xl bg-white flex space-x-32 items-center grow\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-col justify-start grow\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-sm text-black/50 mb-4 font-mono\",\"children\":[\"ERROR CODE: \",\"404 NOT FOUND\"]}],[\"$\",\"h1\",null,{\"className\":\"text-xl sm:text-4xl mb-4\",\"children\":\"We searched high and low...\"}],[\"$\",\"p\",null,{\"className\":\"sm:text-xl mb-8 font-medium text-black/70\",\"children\":[\"But couldn't find what you were looking for.\",[\"$\",\"br\",null,{}],\"Maybe try a different link?\"]}],[\"$\",\"a\",null,{\"href\":\"/\",\"type\":\"$undefined\",\"className\":\"inline-flex items-center justify-center rounded-lg font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background group bg-navy-950 text-primary-foreground hover:bg-navy-950/90 h-10 py-2 px-5 w-fit\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-row w-full items-center justify-center\",\"style\":{},\"onClick\":\"$undefined\",\"children\":[\"$undefined\",false,\"Go back home\",\"$undefined\",[\"$\",\"div\",null,{\"className\":\"flex flex-col flex-1 w-full h-full\",\"style\":{\"flex\":0},\"onClick\":\"$undefined\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"aria-hidden\":\"true\",\"aria-labelledby\":\"$undefined\",\"className\":\"h-4 w-4 ml-2 align-middle transition ease-in-out group-hover:translate-x-1\",\"children\":[null,[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3\"}]]}]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-end hidden lg:block\",\"children\":[\"$\",\"svg\",null,{\"id\":\"magnifying-glass_svg__Layer_1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlnsXlink\":\"http://www.w3.org/1999/xlink\",\"viewBox\":\"0 0 419.28 500\",\"className\":\"w-48 h-48\",\"children\":[[\"$\",\"defs\",null,{\"children\":[[\"$\",\"linearGradient\",null,{\"id\":\"magnifying-glass_svg__linear-gradient\",\"x1\":332.27,\"y1\":134.95,\"x2\":58.25,\"y2\":199.65,\"gradientTransform\":\"scale(1 -1) rotate(-8.46 -3558.2 -974.296)\",\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":0,\"stopColor\":\"#5869eb\"}],[\"$\",\"stop\",null,{\"offset\":1,\"stopColor\":\"#b7e9d4\"}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"magnifying-glass_svg__linear-gradient-2\",\"x1\":90.72,\"y1\":225.68,\"x2\":159.49,\"y2\":236.88,\"gradientTransform\":\"scale(1 -1) rotate(-47.17 -435.29 -202.856)\",\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":0,\"stopColor\":\"#233243\"}],[\"$\",\"stop\",null,{\"offset\":1,\"stopColor\":\"#294481\"}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"magnifying-glass_svg__linear-gradient-3\",\"x1\":593.67,\"y1\":-155.37,\"x2\":617,\"y2\":-155.37,\"gradientTransform\":\"scale(1 -1) rotate(38.71 636.511 -730.61)\",\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":0,\"stopColor\":\"#f4bc97\"}],[\"$\",\"stop\",null,{\"offset\":1,\"stopColor\":\"#f5c56e\"}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"magnifying-glass_svg__linear-gradient-4\",\"x1\":-67.72,\"y1\":415.44,\"x2\":305.73,\"y2\":334.13,\"gradientTransform\":\"matrix(1 0 0 -1 0 502)\",\"xlinkHref\":\"#magnifying-glass_svg__linear-gradient\"}],[\"$\",\"linearGradient\",null,{\"id\":\"magnifying-glass_svg__linear-gradient-5\",\"x1\":-815.69,\"y1\":468.9,\"x2\":-509.59,\"y2\":468.9,\"gradientTransform\":\"matrix(0 1 1 0 -330.03 831.31)\",\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":0,\"stopColor\":\"#f1b3e5\"}],[\"$\",\"stop\",null,{\"offset\":1,\"stopColor\":\"#f1b0e4\"}]]}],[\"$\",\"linearGradient\",null,{\"id\":\"magnifying-glass_svg__linear-gradient-6\",\"x1\":-792.68,\"y1\":467.08,\"x2\":-532.6,\"y2\":467.08,\"gradientTransform\":\"matrix(0 1 1 0 -329.55 832.55)\",\"gradientUnits\":\"userSpaceOnUse\",\"children\":[[\"$\",\"stop\",null,{\"offset\":0,\"stopColor\":\"#e7e9fc\"}],[\"$\",\"stop\",null,{\"offset\":1,\"stopColor\":\"#e5e9fc\"}]]}],[\"$\",\"style\",null,{\"children\":\".magnifying-glass_svg__cls-2{fill:#1c2952}\"}]]}],[\"$\",\"path\",null,{\"d\":\"M293.82 307.51 249.54 343l120.73 150.64c5.27 6.58 19.46 3.97 31.69-5.83s17.87-23.08 12.59-29.66L293.82 307.51Z\",\"style\":{\"fill\":\"url(#magnifying-glass_svg__linear-gradient)\"}}],[\"$\",\"path\",null,{\"className\":\"magnifying-glass_svg__cls-2\",\"d\":\"M379.36 500c-4.74 0-8.72-1.51-11.23-4.65-.46-.58-120.73-150.64-120.73-150.64l-1.72-2.14 48.57-38.93 1.72 2.15L416.7 456.43c3.21 4.01 3.44 9.83.65 16.41-2.55 6.01-7.41 12.09-13.67 17.11-8.2 6.57-17.13 10.05-24.32 10.05ZM253.41 343.42c14.69 18.33 118.64 148.04 119.01 148.5 3.7 4.61 16.04 3.18 27.82-6.26 5.57-4.46 9.84-9.78 12.05-14.97 1.94-4.56 1.98-8.51.12-10.83-.38-.47-104.32-130.17-119.01-148.5l-39.99 32.05Z\"}],[\"$\",\"ellipse\",null,{\"cx\":270.37,\"cy\":323.61,\"rx\":28.37,\"ry\":15.27,\"transform\":\"rotate(-38.71 270.367 323.602)\",\"style\":{\"fill\":\"url(#magnifying-glass_svg__linear-gradient-2)\"}}],[\"$\",\"path\",null,{\"className\":\"magnifying-glass_svg__cls-2\",\"d\":\"M257.31 347.71c-4.74 0-8.71-1.51-11.23-4.64-6.32-7.88-.6-22.6 13.02-33.52 13.61-10.91 29.23-13.3 35.55-5.41 3.21 4.01 3.44 9.83.65 16.41-2.55 6.01-7.4 12.09-13.67 17.1-8.2 6.58-17.13 10.05-24.32 10.05Zm26.11-42.67c-5.58 0-13.35 2.77-20.88 8.8-11.78 9.45-15.87 21.18-12.17 25.8 3.7 4.61 16.04 3.19 27.83-6.26 5.56-4.46 9.84-9.78 12.05-14.97 1.94-4.56 1.98-8.51.12-10.83-1.33-1.66-3.79-2.54-6.94-2.54Z\"}],[\"$\",\"path\",null,{\"d\":\"m243.99 272.03-18.21 14.59 30.54 38.1c2.54 3.17 8.68 2.47 13.7-1.56 5.03-4.03 7.04-9.87 4.5-13.04l-30.54-38.1Z\",\"style\":{\"fill\":\"url(#magnifying-glass_svg__linear-gradient-3)\"}}],[\"$\",\"path\",null,{\"className\":\"magnifying-glass_svg__cls-2\",\"d\":\"M261.12 329.47c-2.9 0-5.39-1.06-6.95-3.02-.39-.49-30.54-38.1-30.54-38.1l-1.72-2.14 22.5-18.03 1.72 2.15 30.54 38.1c1.81 2.26 2.19 5.47 1.04 8.81-1.02 2.95-3.14 5.82-5.97 8.08-2.83 2.27-6.1 3.71-9.19 4.07-.48.05-.96.08-1.42.08h-.01Zm-31.48-42.41c6.42 8.01 28.66 35.76 28.83 35.98.59.74 1.83 1.07 3.45.89 2.05-.23 4.37-1.29 6.38-2.89s3.54-3.65 4.21-5.59c.52-1.52.48-2.82-.13-3.58-.18-.21-22.4-27.95-28.82-35.96l-13.92 11.16Z\"}],[\"$\",\"path\",null,{\"d\":\"M252.11 270.56S131.56 285.1 74.3 222.92C20.93 164.97 30.94 60.14 30.94 60.14s24.69-28.09 28.01-31.15C107.73-15.93 193.7-1.95 250.96 60.22c49.74 54.02 61.46 126.63 31.69 174.22-4.5 7.19-30.54 36.11-30.54 36.11Z\",\"style\":{\"fill\":\"url(#magnifying-glass_svg__linear-gradient-4)\"}}],[\"$\",\"path\",null,{\"className\":\"magnifying-glass_svg__cls-2\",\"d\":\"M221.25 274.77c-10.65 0-23.32-.48-36.87-1.98-34.5-3.83-81.94-15.26-112.1-48.01-28.06-30.47-38.54-73.72-42.4-104.64-4.16-33.36-1.7-60-1.68-60.26l.09-.88.59-.67c1.01-1.15 24.83-28.23 28.22-31.35 49.81-45.89 137.69-31.81 195.88 31.38 49.36 53.6 62.82 128.27 31.99 177.54-4.57 7.31-29.76 35.31-30.83 36.49l-.69.77-1.02.12c-.19.03-12.62 1.48-31.19 1.48h.01ZM33.6 61.27c-.38 4.81-1.93 28.88 1.75 58.31 3.76 30.08 13.92 72.11 40.97 101.48 28.98 31.47 75.02 42.52 108.54 46.25 32.8 3.66 60.37 1.19 65.91.63 4.17-4.65 25.64-28.69 29.56-34.95 29.54-47.22 16.34-119.09-31.38-170.91C192.8 1.12 108.4-12.82 60.81 31.01c-2.56 2.36-19.96 22.01-27.21 30.26Z\"}],[\"$\",\"ellipse\",null,{\"cx\":138.87,\"cy\":168.68,\"rx\":120.08,\"ry\":153.05,\"transform\":\"rotate(-42.64 138.864 168.68)\",\"style\":{\"fill\":\"url(#magnifying-glass_svg__linear-gradient-5)\"}}],[\"$\",\"path\",null,{\"className\":\"magnifying-glass_svg__cls-2\",\"d\":\"M171.48 310.34c-7.23 0-14.64-.6-22.19-1.84-36.87-6-72.66-26.11-100.76-56.63-58.2-63.19-65.02-151.92-15.2-197.8 49.82-45.88 137.7-31.79 195.89 31.39 58.19 63.19 65.01 151.93 15.19 197.81-19.3 17.77-44.65 27.07-72.93 27.07ZM106.42 32.55c-26.19 0-50.63 8.3-69.37 25.56-47.59 43.83-40.63 129.08 15.51 190.05 27.28 29.62 61.94 49.13 97.6 54.93 35.43 5.77 67.57-2.72 90.53-23.86l1.86 2.02-1.86-2.02c47.59-43.83 40.63-129.08-15.51-190.05-34.03-36.95-78.46-56.63-118.76-56.63Z\"}],[\"$\",\"ellipse\",null,{\"cx\":137.53,\"cy\":169.91,\"rx\":102.03,\"ry\":130.04,\"transform\":\"rotate(-42.64 137.526 169.915)\",\"style\":{\"fill\":\"url(#magnifying-glass_svg__linear-gradient-6)\"}}],[\"$\",\"path\",null,{\"className\":\"magnifying-glass_svg__cls-2\",\"d\":\"M165.14 290.6c-35.66 0-74.77-17.25-104.68-49.72-49.6-53.86-55.38-129.52-12.88-168.66 20.68-19.05 49.51-26.7 81.17-21.55 31.42 5.11 61.91 22.24 85.85 48.25 23.95 26 38.52 57.79 41.03 89.52 2.53 31.98-7.46 60.08-28.15 79.13-16.87 15.54-38.87 23.02-62.35 23.02ZM109.85 54.61c-22.76 0-43.11 7.44-58.55 21.66-40.27 37.09-34.35 109.26 13.2 160.89 47.55 51.63 119 63.46 159.27 26.37 19.41-17.88 28.78-44.39 26.39-74.65-2.41-30.51-16.48-61.13-39.59-86.24-23.12-25.1-52.48-41.63-82.69-46.55-6.13-1-12.16-1.49-18.02-1.49h-.01Z\"}]]}]}]]}]}],[\"$\",\"$Lc\",null,{}]]}],\"notFoundStyles\":[],\"initialChildNode\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"connect\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"initialChildNode\":[null,\"$Ld\",null],\"childPropSegment\":[\"uuid\",\"2o4re1e\",\"d\"],\"styles\":null}],\"childPropSegment\":\"connect\",\"styles\":null}]}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:I[85093,[\"6990\",\"static/chunks/13b76428-9da287dbdbeac184.js\",\"8218\",\"static/chunks/aaea2bcf-22b9cc29684a314e.js\",\"1866\",\"static/chunks/e37a0b60-d7388f6cd89e703a.js\",\"8781\",\"static/chunks/8781-a898b873392387f0.js\",\"6851\",\"static/chunks/6851-1cfe8533cc25dcd6.js\",\"1396\",\"static/chunks/1396-8fd76785fbc06d30.js\",\"8445\",\"static/chunks/8445-5832bf612b1f1e91.js\",\"5281\",\"static/chunks/5281-dd20404f267a4678.js\",\"2088\",\"static/chunks/2088-86b39bb1821beb6f.js\",\"2096\",\"static/chunks/2096-aac81ea626d16ce2.js\",\"3206\",\"static/chunks/3206-428ef015045784e2.js\",\"7506\",\"static/chunks/app/connect/%5Buuid%5D/layout-ebf5faed02d29476.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$Le\",null,{\"useRedirect\":true,\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col flex-1 w-full bg-eg-gradient bg-no-repeat bg-contain\",\"style\":{},\"onClick\":\"$undefined\",\"children\":[[\"$\",\"$Lb\",null,{}],[\"$\",\"div\",null,{\"className\":\"flex flex-col flex-1 w-full\",\"style\":{},\"onClick\":\"$undefined\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"connect\",\"children\",[\"uuid\",\"2o4re1e\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"initialChildNode\":[\"$Lf\",\"$L10\",null],\"childPropSegment\":\"__PAGE__\",\"styles\":null}]}],[\"$\",\"$Lc\",null,{}]]}]}]\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"ETHGlobal\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Bringing developers onchain to build the future of the internet.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"author\",\"content\":\"ETHGlobal\"}],[\"$\",\"meta\",\"5\",{\"name\":\"keywords\",\"content\":\"ethereum,global,hackathons,web3,decentralized,crypto,ethglobal,eth,blockchain,developers\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"ETHGlobal\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"Bringing developers onchain to build the future of the internet.\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://ethglobal.com\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:image\",\"content\":\"https://ethglobal.com/og.png\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image:alt\",\"content\":\"ETHGlobal\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:site\",\"content\":\"@ethglobal\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:creator\",\"content\":\"@ethglobal\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:title\",\"content\":\"ETHGlobal\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:description\",\"content\":\"Bringing developers onchain to build the future of the internet.\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image\",\"content\":\"https://ethglobal.com/og.png\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image:alt\",\"content\":\"ETHGlobal\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}]]\n"])</script><script>self.__next_f.push([1,"f:null\n"])</script><script>self.__next_f.push([1,"11:I[70920,[\"6990\",\"static/chunks/13b76428-9da287dbdbeac184.js\",\"8218\",\"static/chunks/aaea2bcf-22b9cc29684a314e.js\",\"1866\",\"static/chunks/e37a0b60-d7388f6cd89e703a.js\",\"7326\",\"static/chunks/2626716e-fa37a6230a8dd8e1.js\",\"5470\",\"static/chunks/03df5840-6f66116e95c13f14.js\",\"6281\",\"static/chunks/08ffe114-47b3292c9125caae.js\",\"8781\",\"static/chunks/8781-a898b873392387f0.js\",\"6851\",\"static/chunks/6851-1cfe8533cc25dcd6.js\",\"1396\",\"static/chunks/1396-8fd76785fbc06d30.js\",\"2630\",\"static/chunks/2630-c3aa7d85139d7821.js\",\"1865\",\"static/chunks/1865-abea850e4e54e2ce.js\",\"4135\",\"static/chunks/4135-9044f1eab35008a2.js\",\"5595\",\"static/chunks/5595-0789153dbd9e107b.js\",\"5281\",\"static/chunks/5281-dd20404f267a4678.js\",\"2088\",\"static/chunks/2088-86b39bb1821beb6f.js\",\"6458\",\"static/chunks/6458-6b7e79a5266335f0.js\",\"2002\",\"static/chunks/app/connect/%5Buuid%5D/page-ef400144b29fc992.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"10:[\"$\",\"$L11\",null,{\"uuid\":\"2o4re1e\",\"self\":false,\"attendeeTypes\":[\"hacker\"],\"event\":{\"slug\":\"london2024\",\"name\":\"ETHGlobal London\",\"squareLogo\":{\"fullUrl\":\"https://storage.googleapis.com/ethglobal-api-production/events%2Fgyosr%2Flogo%2F1700000479708_ethlondon.jpg\"},\"timezone\":{\"name\":\"Europe/London\"}},\"user\":{\"name\":\"Kevin Sundar Raj\",\"title\":null,\"bio\":null,\"avatar\":{\"fullUrl\":\"https://storage.googleapis.com/ethglobal-api-production/users%2Fdbp8f%2Fimages%2FIMG_6003.JPG\"}}}]\n"])</script><script>self.__next_f.push([1,""])</script></body></html>`;

describe("utils.scraper", () => {
  it("parses the injected JSON from the HTML content", () => {
    const userDetails = extractUserFromInjectedJson(htmlContent);
    expect(userDetails.uuid).toEqual("2o4re1e");
    expect(userDetails.user.name).toEqual("Kevin Sundar Raj");
    console.log(userDetails);
  });

  it("fetches the user details from the html page", async () => {
    const res = await fetch(`https://ethglobal.com/connect/2o4re1e`, {
      headers: {
        cookie: `ethglobal_access_token=${process.env.ETHGLOBAL_ACCESS_TOKEN}`,
      },
      method: "GET",
    });

    const html = await res.text();
    const userDetails = extractUserFromInjectedJson(html);
    expect(userDetails.uuid).toEqual("2o4re1e");
    expect(userDetails.user.name).toEqual("Kevin Sundar Raj");
    // console.log(userDetails);
  });

  it.only("fetches the user details from the html page", async () => {
    const res = await fetch(`https://ethglobal.com/connect/2s00ot`, {
      headers: {
        cookie: `ethglobal_access_token=${process.env.ETHGLOBAL_ACCESS_TOKEN}`,
      },
      method: "GET",
    });

    const html = await res.text();
    const userDetails = extractUserFromInjectedJson(html);
    console.log(userDetails);
    expect(userDetails.uuid).toEqual("2o4re1e");
    expect(userDetails.user.name).toEqual("Kevin Sundar Raj");
  });
});
